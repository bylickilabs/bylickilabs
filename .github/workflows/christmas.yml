name: Christmas Animation Generator

on:
  schedule:
    - cron: "0 */12 * * *"
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Generate Christmas SVG safely
        run: |
          echo '<svg width="100%" height="200" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">' > christmas_santa.svg
          echo '<rect width="100%" height="100%" fill="#001026"/>' >> christmas_santa.svg

          # Schnee
          echo '<g id="snow">' >> christmas_santa.svg
          echo '<circle cx="50" cy="20" r="3" fill="white"><animate attributeName="cy" from="-10" to="210" dur="4s" repeatCount="indefinite"/></circle>' >> christmas_santa.svg
          echo '<circle cx="120" cy="40" r="2" fill="white"><animate attributeName="cy" from="-10" to="210" dur="5s" repeatCount="indefinite"/></circle>' >> christmas_santa.svg
          echo '<circle cx="200" cy="10" r="3" fill="white"><animate attributeName="cy" from="-10" to="210" dur="3.3s" repeatCount="indefinite"/></circle>' >> christmas_santa.svg
          echo '<circle cx="300" cy="50" r="2" fill="white"><animate attributeName="cy" from="-10" to="210" dur="4.5s" repeatCount="indefinite"/></circle>' >> christmas_santa.svg
          echo '<circle cx="500" cy="5" r="3" fill="white"><animate attributeName="cy" from="-10" to="210" dur="3.8s" repeatCount="indefinite"/></circle>' >> christmas_santa.svg
          echo '<circle cx="700" cy="20" r="2" fill="white"><animate attributeName="cy" from="-10" to="210" dur="6s" repeatCount="indefinite"/></circle>' >> christmas_santa.svg
          echo '</g>' >> christmas_santa.svg

          # Santa + Schlitten + Rentiere
          echo '<g id="santa" transform="translate(850, 80)">' >> christmas_santa.svg
          echo '<rect x="0" y="30" width="80" height="20" fill="#b30000"/>' >> christmas_santa.svg
          echo '<rect x="10" y="15" width="40" height="30" fill="#ff0000"/>' >> christmas_santa.svg
          echo '<circle cx="30" cy="10" r="10" fill="#ffcccc"/>' >> christmas_santa.svg
          echo '<rect x="20" y="20" width="20" height="20" fill="red"/>' >> christmas_santa.svg

          echo '<g transform="translate(-70, 0)">' >> christmas_santa.svg
          echo '<circle cx="0" cy="30" r="10" fill="#8b4513"/>' >> christmas_santa.svg
          echo '<circle cx="-30" cy="30" r="10" fill="#8b4513"/>' >> christmas_santa.svg
          echo '<circle cx="-60" cy="30" r="10" fill="#8b4513"/>' >> christmas_santa.svg
          echo '</g>' >> christmas_santa.svg

          echo '<animateTransform attributeName="transform" type="translate" from="850 80" to="-300 80" dur="12s" repeatCount="indefinite"/>' >> christmas_santa.svg
          echo '</g>' >> christmas_santa.svg
          echo '</svg>' >> christmas_santa.svg

      - name: Commit SVG
        run: |
          git config --local user.name "github-actions"
          git config --local user.email "actions@github.com"
          git add christmas_santa.svg
          git commit -m "Update Christmas Animation" || echo "No changes"
          git push
